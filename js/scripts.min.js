$(document).ready(function(){SI.init()});var SI={$currentPageContentWrapper:null,tagArray:["NYFW","LFW","MFW","PFW"],allChartData:void 0,defaultTag:"NYFW",currentTag:void 0,jsonData:void 0,init:function(){this.buildHeader(),this.loadHashtag()},buildHeader:function(){var a=this;_.each(this.tagArray,function(b){b==a.defaultTag?$(".js-header").append('<li class="active"><div class="arrow-down"></div><a data-value="'+b+'" class="js-hash" href="#">#'+b+"</a></li>"):$(".js-header").append('<li><div class="arrow-down"></div><a data-value="'+b+'" class="js-hash" href="#">#'+b+"</a></li>")}),$(".js-header").on("click",".js-hash",function(b){b.preventDefault(),a.currentTag=$(this).data("value"),$(".js-header li").removeClass("active"),$(this).parent().addClass("active"),a.loadHashtag()})},loadHashtag:function(){var a=this;void 0==a.currentTag?(a.currentTag=a.defaultTag,a.getChartData(),a.getJson()):(a.showLoading(),a.getJson())},getChartData:function(){var a=this;a.allChartData=[],_.each(this.tagArray,function(b){$.ajax({type:"GET",dataType:"JSON",url:"http://localhost:9001/json/"+b+".json",data:{},success:function(c,d,e){var f=c;f=c.timeline;var g=[];g.push(b),_.each(f,function(a){g.push(a.count)}),a.allChartData.push(g)},error:function(a,b){alert("error")}})})},createChart:function(){var a=this;c3.generate({bindto:".js-graph",legend:{show:!1},axis:{y:{show:!1},x:{tick:{outer:!1}}},tooltip:{show:!1},point:{show:!1},data:{columns:a.allChartData,type:"spline"}})},updateData:function(){var a=this;$(".js-main-counter").html(a.jsonData.hashtag_count),_.each(a.jsonData.locations,function(b,c){var d=parseInt(Object.values(b)[0]/a.jsonData.hashtag_count*100);"New York"==Object.keys(b).toString()&&$(".js-circle-nyc").css("transform","scale("+d+")"),"Paris"==Object.keys(b).toString()&&$(".js-circle-par").css("transform","scale("+d+")"),"Milan"==Object.keys(b).toString()&&$(".js-circle-mil").css("transform","scale("+d+")"),"London"==Object.keys(b).toString()&&$(".js-circle-lnd").css("transform","scale("+d+")")}),$(".js-secondary-list").html(""),_.each(a.jsonData.related_hashtags,function(a,b){var c=Object.keys(a).toString(),d=Object.values(a)[0],e='<div class="secondary-result__list-item"><div class="rel-hashtag"><div class="rel-hashtag__name headline-3">#'+c+'</div><div class="rel-hashtag__counter headline-2">'+d+"</div></div></div>";$(".js-secondary-list").append(e)})},showLoading:function(){$("body").removeClass("loaded-hide loaded")},hideLoading:function(){$("body").addClass("loaded"),setTimeout(function(){$("body").addClass("loaded-hide")},300)},getJson:function(){var a=this;$.ajax({type:"GET",dataType:"JSON",url:"http://localhost:9001/json/"+a.currentTag+".json",data:{},success:function(b,c,d){console.log(b,c,d),a.jsonData=b,setTimeout(function(){a.updateData(),a.hideLoading(),a.createChart()},500)},error:function(a,b){alert("error")}})}};